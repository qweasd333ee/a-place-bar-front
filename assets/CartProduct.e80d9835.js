import{Q as f}from"./QImg.a8481b01.js";import{y as v,a0 as q,l as h,aL as Q,at as B,o as r,C as P,D as m,ar as N,a as t,F as n,c as u,aC as V,aD as D,b as S,aB as o,H as p,Q as c,n as $,G as F}from"./index.94b621dd.js";import{Q as L}from"./QMarkupTable.18613219.js";import{Q as T}from"./QPage.ccae7a9f.js";import"./use-dark.45a25f8d.js";const z={id:"section01"},A={class:"container"},E={class:"row"},G=t("div",{class:"col-12 text-white text-center text-h3 text"},"\u8A02\u9910\u78BA\u8A8D ",-1),H={class:"col-12 q-mb-xl"},I=t("thead",{class:"text-center"},[t("tr",null,[t("th",null,"\u5716\u7247"),t("th",null,"\u540D\u7A31"),t("th",null,"\u55AE\u50F9"),t("th",null,"\u6578\u91CF"),t("th",null,"\u5C0F\u8A08"),t("th",null,"\u64CD\u4F5C")])],-1),M={class:"text-center"},R={key:0},U=t("td",{class:"text-center text-h6",colspan:"6"},"\u6C92\u6709\u8A02\u9910",-1),j=[U],J={class:"col-12 text-center"},K={class:"q-mb-lg text-white"},et={__name:"CartProduct",setup(O){const C=N(),k=v(),{editCartProduct:b,checkout:g}=k,s=q([]),i=async(e,l)=>{await b({_id:s[e].p_id._id,quantity:l}),s[e].quantity+=l,s[e].quantity<=0&&s.splice(e,1)},y=async()=>{await g(),C.push("/member/orders")},w=h(()=>s.reduce((e,l)=>e+l.p_id.price*l.quantity,0)),x=h(()=>s.length>0&&!s.some(e=>!e.p_id.sell));return(async()=>{try{const{data:e}=await Q.get("/users/CartProduct");s.push(...e.result)}catch{B.fire({icon:"error",title:"\u5931\u6557",text:"\u53D6\u5F97\u8CFC\u7269\u8ECA\u5931\u6557"})}})(),(e,l)=>(r(),P(T,{id:"member-card-product"},{default:m(()=>[t("section",z,[t("div",A,[t("div",E,[G,t("div",H,[n(L,null,{default:m(()=>[I,t("tbody",M,[(r(!0),u(D,null,V(s,(a,d)=>(r(),u("tr",{key:a._id,class:$({"bg-red":!a.p_id.sell})},[t("td",null,[n(f,{src:a.p_id.image,ratio:1,width:"150px"},null,8,["src"])]),t("td",null,o(a.p_id.name),1),t("td",null,o(a.p_id.price),1),t("td",null,[n(c,{color:"warning",label:"-",onClick:_=>i(d,-1)},null,8,["onClick"]),F(" \xA0"+o(a.quantity)+"\xA0 ",1),n(c,{color:"warning",label:"+",onClick:_=>i(d,1)},null,8,["onClick"])]),t("td",null,o(a.quantity*a.p_id.price),1),t("td",null,[n(c,{color:"red",onClick:_=>i(d,a.quantity*-1),label:"\u522A\u9664"},null,8,["onClick"])])],2))),128)),s.length===0?(r(),u("tr",R,j)):S("",!0)])]),_:1})]),t("div",J,[t("h5",K,"\u7E3D\u91D1\u984D "+o(p(w)),1),n(c,{class:"q-mb-lg",color:"warning",label:"\u7D50\u5E33",disabled:!p(x),onClick:y},null,8,["disabled"])])])])])]),_:1}))}};export{et as default};

import{x as f,$ as v,k as h,aJ as B,aq as q,o as r,B as S,C as m,ao as Q,a as t,E as l,c as d,az as N,aA as V,b as $,ay as a,G as k,Q as c,n as z,F as A}from"./index.89cdf58b.js";import{Q as D}from"./QMarkupTable.9305f92f.js";import{Q as E}from"./QPage.f7dc70bf.js";import"./use-dark.84e67e0f.js";const F={id:"section01"},L={class:"container"},P={class:"row"},T=t("div",{class:"col-12 text-white text-center text-h3 text"},"\u8A02\u4F4D\u78BA\u8A8D ",-1),G={class:"col-12 q-mb-xl"},J=t("thead",{class:"text-center"},[t("tr",null,[t("th",null,"\u5EA7\u4F4D\u7DE8\u865F"),t("th",null,"\u8A02\u4F4D\u65E5\u671F\u3001\u6642\u9593"),t("th",null,"\u59D3\u540D"),t("th",null,"\u96FB\u8A71"),t("th",null,"\u4FE1\u7BB1"),t("th",null,"\u8A02\u4F4D\u4EBA\u6578"),t("th",null,"\u64CD\u4F5C")])],-1),M={class:"text-center"},R={key:0},U=t("td",{class:"text-center text-h6",colspan:"7"},"\u6C92\u6709\u8A02\u4F4D",-1),j=[U],H={class:"col-12 text-center"},I={class:"q-mb-lg text-white"},Z={__name:"CartSeat",setup(K){const b=Q(),p=f(),{editCartSeat:g,booking:C}=p,n=v([]),i=async(e,s)=>{await g({_id:n[e].s_id._id,quantity:s}),n[e].quantity+=s,n[e].quantity<=0&&n.splice(e,1)};async function y(){await C(),b.push("/member/bookings")}const w=h(()=>n.reduce((e,s)=>e+s.quantity,0)),x=h(()=>n.length>0&&!n.some(e=>!e.s_id.book));return(async()=>{try{const{data:e}=await B.get("/users/CartSeat");n.push(...e.result)}catch{q.fire({icon:"error",title:"\u5931\u6557",text:"\u53D6\u5F97\u8CFC\u7269\u8ECA\u5931\u6557"})}})(),(e,s)=>(r(),S(E,{id:"member-card-seat"},{default:m(()=>[t("section",F,[t("div",L,[t("div",P,[T,t("div",G,[l(D,null,{default:m(()=>[J,t("tbody",M,[(r(!0),d(V,null,N(n,(o,u)=>(r(),d("tr",{key:o._id,class:z({"bg-red":!o.s_id.book})},[t("td",null,a(o.s_id.name),1),t("td",null,a(new Date(o.date).toLocaleString()),1),t("td",null,a(o.name),1),t("td",null,a(o.phone),1),t("td",null,a(o.email),1),t("td",null,[l(c,{color:"warning",label:"-",onClick:_=>i(u,-1)},null,8,["onClick"]),A(" \xA0"+a(o.quantity)+"\xA0 ",1),l(c,{color:"warning",label:"+",onClick:_=>i(u,1)},null,8,["onClick"])]),t("td",null,[l(c,{color:"red",onClick:_=>i(u,o.quantity*-1),label:"\u522A\u9664"},null,8,["onClick"])])],2))),128)),n.length===0?(r(),d("tr",R,j)):$("",!0)])]),_:1})]),t("div",H,[t("h5",I,"\u7E3D\u4EBA\u6578 "+a(k(w)),1),l(c,{class:"q-mb-lg",color:"warning",label:"\u8A02\u4F4D",disabled:!k(x),onClick:y},null,8,["disabled"])])])])])]),_:1}))}};export{Z as default};
